import initStoryshots, { snapshotWithOptions } from '@storybook/addon-storyshots'
import React from 'react'
import ReactDOM from 'react-dom'

ReactDOM.createPortal = node => React.createElement('portal-dummy', null, node)

const createNodeMock = el => {
  if (el.type === 'input' || el.type === 'span') {
    const mockEl = document.createElement('div')

    return mockEl
  }

  return {
    ...el,
    focus() {},
    set() {},
    destroy() {}
  }
}

initStoryshots({
  storyKindRegex: /^Hours$/,
  test: snapshotWithOptions({
    createNodeMock
  })
})
